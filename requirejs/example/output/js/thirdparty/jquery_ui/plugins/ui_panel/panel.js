(function(a){a.widget("ui.panel",{options:{event:"click",collapsible:!0,collapseType:"default",collapsed:!1,accordion:!1,collapseSpeed:"fast",draggable:!1,trueVerticalText:!0,vHeight:"220px",stackable:!0,width:"auto",controls:!1,cookie:null,widgetClass:"ui-helper-reset ui-widget ui-panel",headerClass:"ui-helper-reset ui-widget-header ui-panel-header ui-corner-top",contentClass:"ui-helper-reset ui-widget-content ui-panel-content ui-corner-bottom",contentTextClass:"ui-panel-content-text",rightboxClass:"ui-panel-rightbox",controlsClass:"ui-panel-controls",titleClass:"ui-panel-title",titleTextClass:"ui-panel-title-text",iconClass:"ui-icon",hoverClass:"ui-state-hover",collapsePnlClass:"ui-panel-clps-pnl",headerIconClpsd:"ui-icon-triangle-1-e",headerIcon:"ui-icon-triangle-1-s",slideRIconClpsd:"ui-icon-arrowthickstop-1-w",slideRIcon:"ui-icon-arrowthickstop-1-e",slideLIconClpsd:"ui-icon-arrowthickstop-1-e",slideLIcon:"ui-icon-arrowthickstop-1-w"},_init:function(){this._panelize()},_panelize:function(){if(this.element.is("div")){var b=this,c=this.options;this.panelBox=this.element,c.width=="auto"?c.width=this.panelBox.css("width"):this.panelBox.css("width",c.width),this.panelBox.attr("role","panel"),c.id=this.panelBox.attr("id"),this.headerBox=this.element.children(":first"),this.contentBox=this.element.children().eq(1),c.content=this.contentBox.html(),this.contentBox.wrapInner("<div/>"),this.contentTextBox=this.contentBox.children(":first").addClass(c.contentTextClass),this.headerBox.wrapInner("<div><span/></div>"),this.titleBox=this.headerBox.children(":first"),this.titleTextBox=this.titleBox.children(":first"),this.titleText=this.titleTextBox.html(),this.headerBox.prepend("<span/>"),this.rightBox=this.headerBox.children(":first").addClass(c.rightboxClass),c.controls!=!1?(this.rightBox.append("<span/>"),this.controlsBox=this.rightBox.children(":first").addClass(c.controlsClass).html(c.controls)):this.controlsBox=null,this.panelBox.addClass(c.widgetClass),this.headerBox.addClass(c.headerClass),this.titleBox.addClass(c.titleClass),this.titleTextBox.addClass(c.titleTextClass),this.contentBox.addClass(c.contentClass);if(c.collapsible){switch(c.collapseType){case"slide-right":var d=0;c.controls&&(d=1),this.rightBox.append("<span><span/></span>"),this.collapsePanel=this.rightBox.children().eq(d).addClass(c.collapsePnlClass),this.collapseButton=this.collapsePanel.children(":first").addClass(c.slideRIcon),this.iconBtnClpsd=c.slideRIconClpsd,this.iconBtn=c.slideRIcon,this.ctrlBox=this.controlsBox;break;case"slide-left":this.headerBox.prepend("<span><span/></span>"),this.collapsePanel=this.headerBox.children(":first").addClass(c.collapsePnlClass),this.collapseButton=this.collapsePanel.children(":first").addClass(c.slideLIcon),this.iconBtnClpsd=c.slideLIconClpsd,this.iconBtn=c.slideLIcon,this.ctrlBox=this.rightBox;break;default:this.headerBox.prepend("<span><span/></span>"),this.collapseButton=this.headerBox.children(":first").addClass(c.headerIcon),this.iconBtnClpsd=c.headerIconClpsd,this.iconBtn=c.headerIcon,this.ctrlBox=this.controlsBox}this._buttonHover(this.collapseButton),this.collapseButton.addClass(c.iconClass),c.event&&(this.collapseButton.bind(c.event+".panel",function(a){return b._clickHandler.call(b,a,this)}),this.titleTextBox.bind(c.event+".panel",function(a){return b._clickHandler.call(b,a,this)})),c.accordion&&(c.collapsed=!0,c.trueVerticalText=!1),c.cookie&&(b._cookie()==0?c.collapsed=!1:c.collapsed=!0),this.panelBox.data("collapsed",c.collapsed),c.stackable&&a.inArray(c.collapseType,["slide-right","slide-left"])>-1&&(this.panelDock=this.panelBox.siblings("div[role=panelDock]:first"),this.panelFrame=this.panelBox.siblings("div[role=panelFrame]:first"),this.panelDock.length==0&&(this.panelDock=this.panelBox.parent(0).prepend("<div>").children(":first"),this.panelFrame=this.panelDock.after("<div>").next(":first"),this.panelDock.attr("role","panelDock").css("float",c.collapseType=="slide-left"?"left":"right"),this.panelFrame.attr("role","panelFrame").css({"float":c.collapseType=="slide-left"?"left":"right",overflow:"hidden"})),c.collapsed?this.panelDock.append(this.panelBox):this.panelFrame.append(this.panelBox)),c.collapsed&&b.toggle(0,!0)}else this.titleTextBox.css("cursor","default");!c.accordion&&c.draggable&&a.fn.draggable&&this._makeDraggable(),this.panelBox.show()}},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-panel-"+this.options.id);return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_makeDraggable:function(){this.panelBox.draggable({containment:"document",handle:".ui-panel-header",cancel:".ui-panel-content",cursor:"move"}),this.contentBox.css("position","absolute")},_clickHandler:function(a,b){var c=this.options;if(c.disabled)return!1;this.toggle(c.collapseSpeed);return!1},toggle:function(b,c){var d=this,e=this.options,f=this.panelBox,g=this.contentBox,h=this.headerBox,i=this.titleTextBox,j=this.titleText,k=this.ctrlBox,l=this.panelDock,m="";jQuery.support.leadingWhitespace||(m="-ie"),g.css("display")=="none"?this._trigger("unfold"):this._trigger("fold"),k&&k.toggle(0);if(e.collapseType=="default")b==0?(k&&k.hide(),g.hide()):g.slideToggle(b);else{b==0?(e.collapsed=!1,k&&k.hide(),g.hide()):g.toggle();if(e.collapsed==!1){if(e.trueVerticalText){h.toggleClass("ui-panel-vtitle").css("height",e.vHeight);if(m==""){var n="height:"+(parseInt(e.vHeight)-50)+"px;width:100%;position:absolute;bottom:0;left:0;";i.empty().append('<div style="'+n+'z-index:3;"></div><object style="'+n+'z-index:2;" type="image/svg+xml" data="data:image/svg+xml;charset=utf-8,<svg xmlns=\'http://www.w3.org/2000/svg\'><text x=\'-'+(parseInt(e.vHeight)-60)+"px' y='16px' style='font-weight:"+i.css("font-weight")+";font-family:"+i.css("font-family").replace(/"/g,"")+";font-size:"+i.css("font-size")+";fill:"+i.css("color")+";' transform='rotate(-90)' text-rendering='optimizeSpeed'>"+j+'</text></svg>"></object>').css("height",e.vHeight)}i.toggleClass("ui-panel-vtext"+m)}else h.attr("align","center"),i.html(i.text().replace(/(.)/g,"$1<BR>"));f.animate({width:"2.4em"},b),e.stackable&&(c?l.append(f):l.prepend(f))}else e.stackable&&this.panelFrame.append(f),e.trueVerticalText?(h.toggleClass("ui-panel-vtitle").css("height","auto"),i.empty().append(j),i.toggleClass("ui-panel-vtext"+m)):(h.attr("align","left"),i.html(i.text().replace(/<BR>/g," "))),f.animate({width:e.width},b)}if((b!=0||e.trueVerticalText)&&e.cookie==null||!c&&e.cookie!=null)e.collapsed=!e.collapsed;this.panelBox.data("collapsed",e.collapsed),c||(e.cookie&&d._cookie(Number(e.collapsed),e.cookie),e.accordion&&a("."+e.accordion+"[role='panel'][id!='"+e.id+"']:not(:data(collapsed))").panel("toggle",b,!0)),this.collapseButton.toggleClass(this.iconBtnClpsd).toggleClass(this.iconBtn),h.toggleClass("ui-corner-all")},content:function(a){this.contentTextBox.html(a)},destroy:function(){var b=this.options;this.headerBox.html(this.titleText).removeAttr("align").removeAttr("style").removeClass("ui-panel-vtitle ui-corner-all "+b.headerClass),this.contentBox.removeClass(b.contentClass).removeAttr("style").html(b.content),this.panelBox.removeAttr("role").removeAttr("style").removeData("collapsed").unbind(".panel").removeClass(b.widgetClass),b.stackable&&a.inArray(b.collapseType,["slide-right","slide-left"])>-1&&(this.panelDock.before(this.panelBox),this.panelDock.children("div[role=panel]").length==0&&this.panelFrame.children("div[role=panel]").length==0&&(this.panelDock.remove(),this.panelFrame.remove())),b.cookie&&this._cookie(null,b.cookie);return this},_buttonHover:function(b){var c=this.options;b.bind({mouseover:function(){a(this).addClass(c.hoverClass)},mouseout:function(){a(this).removeClass(c.hoverClass)}})}}),a.extend(a.ui.panel,{version:"0.6"})})(jQuery)