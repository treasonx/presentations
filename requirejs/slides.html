<!DOCTYPE html> 
<!--
  Copyright 2010 Google Inc.
 
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
 
     http://www.apache.org/licenses/LICENSE-2.0
 
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
 
  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Chrome Developer Relations <chrome-devrel@googlegroups.com>
-->
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" />
    <title>RequireJS presentation</title>
		<!--<link href="http://fonts.googleapis.com/css?family=Droid+Sans|Droid+Sans+Mono" rel="stylesheet" type="text/css" />-->
		<link href="http://fonts.googleapis.com/css?family=Droid+Sans|Droid+Sans+Mono" rel="stylesheet" type="text/css" />
		<link rel="stylesheet" href="style.css" type="text/css" media="screen" charset="utf-8"/>		
		<link type="text/css" rel="stylesheet" href="syntax.css"/>
		<script src="shCore.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="shBrushJScript.js"></script> 
    <style>
      body {
        font: 20px "Lucida Grande", "Trebuchet MS", Verdana, sans-serif;
        padding: 0;
        margin: 0;
        width: 100%;
        height: 100%;
        position: absolute;
        left: 0px; top: 0px;
      }
      
      .presentation {
        position: absolute;
        height: 100%;
        width: 100%;
        left: 0px;
        top: 0px;
        display: block;
				overflow: hidden;
				background-image:url('imgs/background.jpg');
				background-repeat:repeat-x;
				background-attachment:fixed;
				background-position:top;
			 	background-color:#132035;	
				
        
      }
      
      .slides {
        width: 100%;
        height: 100%;
        left: 0;
        top: 0;
        position: absolute;
        display: block;
        -webkit-transition: -webkit-transform 1s ease-in-out;
        -moz-transition: -moz-transform 1s ease-in-out;
        -o-transition: -o-transform 1s ease-in-out;
        transition: transform 1s ease-in-out;
        
        /* so it's visible in the iframe. */
        -webkit-transform: scale(0.8);
        -moz-transform: scale(0.8);
        -o-transform: scale(0.8);
        transform: scale(0.8);
        
      }
      
      .slide {
        display: none;
        position: absolute;
        overflow: hidden;
        width: 900px;
        height: 700px;
        left: 50%;
        top: 50%;
        margin-top: -350px;
        background-color: #eee;
        background: -webkit-gradient(linear, left bottom, left top, from(#74AAD3), to(#fff));
        background: -moz-linear-gradient(bottom, #88DDED, #fff);
        background: linear-gradient(bottom, #88DDED, #fff);
        -webkit-transition: all 0.25s ease-in-out;
        -moz-transition: all 0.25s ease-in-out;
        -o-transition: all 0.25s ease-in-out;
        transition: all 0.25s ease-in-out;
        -webkit-transform: scale(1);
        -moz-transform: scale(1);
        -o-transform: scale(1);
        transform: scale(1);
      }
      
      .slide:nth-child(even) {
        -moz-border-radius: 20px 0;
        -khtml-border-radius: 20px 0;
        border-radius: 20px 0; /* includes Opera 10.5+ */
        -webkit-border-top-left-radius: 20px;
        -webkit-border-bottom-right-radius: 20px;
      }
      
      .slide:nth-child(odd) {
        -moz-border-radius: 0 20px;
        -khtml-border-radius: 0 20px;
        border-radius: 0 20px;
        -webkit-border-top-right-radius: 20px;
        -webkit-border-bottom-left-radius: 20px;
      }
 
      .slide p, .slide textarea {
        font-size: 120%;
      }
 
      .slide .counter {
        color: #999999;
        position: absolute;
        left: 20px;
        bottom: 20px;
        display: block;
        font-size: 70%;
      }
 
      .slide.title > .counter,
      .slide.segue > .counter,
      .slide.mainTitle > .counter {
        display: none;
      }
 
      .force-render {
        display: block;
        visibility: hidden;
      }
      
      .slide.far-past {
        display: block;
        margin-left: -2400px;
      }
      
      .slide.past {
        visibility: visible;
        display: block;
        margin-left: -1400px;
      }
      
      .slide.current {
        visibility: visible;
        display: block;
        margin-left: -450px;
      }
      
      .slide.future {
        visibility: visible;
        display: block;
        margin-left: 500px;
      }
      
      .slide.far-future {
        display: block;
        margin-left: 1500px;
      }
      
      body.three-d div.slides {
        -webkit-transform: translateX(50px) scale(0.8) rotateY(10deg);
        -moz-transform: translateX(50px) scale(0.8) rotateY(10deg);
        -o-transform: translateX(50px) scale(0.8) rotateY(10deg);
        transform: translateX(50px) scale(0.8) rotateY(10deg);
      }
      
      /* Content */
      
      @font-face { font-family: 'Junction'; src: url(src/Junction02.otf); }
      @font-face { font-family: 'LeagueGothic'; src: url(src/LeagueGothic.otf); }
      
      header {
        font-family: 'Droid Sans';
        font-weight: normal;
        letter-spacing: -.05em;
        text-shadow: rgba(0, 0, 0, 0.2) 0 2px 5px;
        left: 30px;
        top: 25px;
        margin: 0;
        padding: 0;
        font-size: 140%;
      }
      
      h1 {
        font-size: 140%;
        display: inline;
        font-weight: normal;
        padding: 0;
        margin: 0;
      }
      
      h2 {
        font-family: 'Droid Sans';
        color: black;
        font-size: 120%;
        padding: 0;
        margin: 20px 0;
      }
            
      h2:first-child {
        margin-top: 0;
      }
 
      section, footer {
        font-family: 'Droid Sans';
        color: #3f3f3f;
        text-shadow: rgba(0, 0, 0, 0.2) 0 2px 5px;
        margin: 100px 30px 0;
        display: block;
        overflow: hidden;
      }
      
      footer {
        font-size: 100%;
        margin: 20px 0 0 30px;
      }
 
      a {
        color: inherit;
        display: inline-block;
        text-decoration: none;
        line-height: 110%;
        border-bottom: 2px solid #3f3f3f;
      }
 
      ul {
        margin: 0;
        padding: 0;
      }
 
      button {
        font-size: 100%;
      }
      
            
      section.left {
        float: left;
        width: 390px;
      }
      
      section.small {
        font-size: 24px;
      }
      
      section.small ul {
        margin: 0 0 0 15px;
        padding: 0;
      }
      
      section.small li {
        padding-bottom: 0;
      }
            
      section.middle {
        line-height: 2em;
        text-align: center;
        display: table-cell;
        vertical-align: middle;
        height: 700px;
        width: 900px;
      }
      
              
      input {
        font-size: 100%;
        margin-right: 10px;
        font-family: Helvetica;
        padding: 3px;
      }
      input[type="range"] {
        width: 100%;
      }
      
      button {
        margin: 20px 10px 0 0;
        font-family: Verdana;
      }
      
      button.large {
        font-size: 32px;
      }
        
            
      div.example {
        display: block;
        padding: 10px 20px;
        color: black;
        background: rgba(255, 255, 255, 0.4);
        -webkit-border-radius: 8px;
        -khtml-border-radius: 8px;
        -moz-border-radius: 8px;
        border-radius: 8px;
        margin-bottom: 10px;
        border: 1px solid rgba(0, 0, 0, 0.2);
      }
      
      video {
        -moz-border-radius: 8px;
        -khtml-border-radius: 8px;
        -webkit-border-radius: 8px;
        border-radius: 8px;
        border: 1px solid rgba(0, 0, 0, 0.2);
      }
      
      .key {
        font-family: 'Droid Sans';
        color: black;
        display: inline-block;
        padding: 6px 10px 3px 10px;
        font-size: 100%;
        line-height: 30px;
        text-shadow: none;
        letter-spacing: 0;
        bottom: 10px;
        position: relative;
        -moz-border-radius: 10px;
        -khtml-border-radius: 10px;
        -webkit-border-radius: 10px;
        border-radius: 10px;
        background: white;
        box-shadow: rgba(0, 0, 0, 0.1) 0 2px 5px;
        -webkit-box-shadow: rgba(0, 0, 0, 0.1) 0 2px 5px;
        -moz-box-shadow: rgba(0, 0, 0, 0.1) 0 2px 5px;
        -o-box-shadow: rgba(0, 0, 0, 0.1) 0 2px 5px;
      }
      
      .key { font-family: Arial; }
      
      :not(header) > .key {
        margin: 0 5px;
        bottom: 4px;
      }
 
      .two-column {
        -webkit-column-count: 2;
        -moz-column-count: 2;
        column-count: 2;
      }
 
      .stroke {
        -webkit-text-stroke-color: red;
        -webkit-text-stroke-width: 1px;
      } /* currently webkit-only */
      
      .center {
        text-align: center;
      }
      
      #presentation-counter {
        color: #ccc;
        font-size: 70%;
        letter-spacing: 1px;
        position: absolute;
        top: 40%;
        left: 0;
        width: 100%;
        text-align: center;
      }
      
      div:not(.current).reduced {
        -webkit-transform: scale(0.8);
        -moz-transform: scale(0.8);
        -o-transform: scale(0.8);
        transform: scale(0.8);
      } 
      
      .no-transitions {
        -webkit-transition: none;
        -moz-transition: none;
        -o-transition: none;
        transition: none;
      }
 
      .no-gradients {
        background: none;
        background-color: #fff;
      }
      
      ul.bulleted {
        padding-left: 30px;
      }

			h1.title{
				color: #4D4D4D;
				text-align: center;
				font-size: 15px;
				font-weight: normal;
				text-transform: uppercase;
				letter-spacing: 3px;
				text-shadow: 1px 1px white;
								
			}

    </style> 
    
  </head> 
  <body> 
    <div class="presentation"> 
      <div id="presentation-counter"></div> 
      <div class="slides"> 
        <div class="slide"> 
          <section class="middle"> 
					<img src="imgs/logo.png" /><br>
            <h1 class="title">a javascript module loader</h1> 
						<p>James Morrin</p> 
						<p> <img src="imgs/twitter.png" />  treasonx</p>
          </section> 
        </div> 
	
				<div class="slide"> 
          <section class="middle"> 
            <h2> 
            	A Little About The Project
            </h2> 
            <ul> 
							<li><a href="http://requirejs.org/">requirejs.org</a> </li> 
							<li><a href="https://github.com/jrburke/requirejs">RequireJS on GitHub</a></li> 
							<li><a href="http://twitter.com/jrburke">@jrburke</a></li>
							<!-- 

							-->
						</ul> 
          </section> 
				</div> 
				
				<div class="slide"> 
          <section class="middle"> 
            <h2> 
              Why RequireJS
            </h2> 
					<img src="imgs/hard.jpg" />		
					</section> 
				</div>

				<div class="slide"> 
          <section class="middle"> 
            <h2> 
              No Native Support For include/import/require
            </h2> 
					<img src="imgs/yuno.jpg" />		
					</section> 
        </div>  




        <div class="slide"> 
          <section class="middle"> 
            <h2> 
              What is RequireJS
            </h2> 
						<!--
							Our client side code is starting to grow increasingly more complex. We are quickly
							moving from  Web Sites towards Web applications. This requires (pun intended) some sort of application
							structure or architecture. Assembly of these applications gets more difficult as we start
							to modularize our code. And in production we want to deliver optimized code in as few
							HTTP requests as possible. This is where requirejs comes in. 
						-->
            <ul> 
							<li>Helps Load and Manage js files
							<!--
								Javascript lacks some sort of include/import/require statement. We need a tool that allows for 
								the ablity to load nested dependencies.
							-->
							</li> 
							<li>Why use it?
								<!--
								Keep your code more simple and modular to help promote testability and reusability. Follows the 
							 	CommonJS syntax which we hope should become more common over time and we can reuse our code. 
								RequireJS does not follow CommonJS module loading to the letter due to the fact that CommonJS
								require is a synchronus call which does not work well in the browser environment. 	
								-->
							</li> 
             </ul> 
          </section> 
        </div> 


				


				<div class="slide"> 
          <section class="middle"> 
            <h2> 
            	What About jQuery
            </h2> 
            <ul> 
              <li>RequireJS is not specific to jQuery</li> 
							<li>Special build of jQuery</li> 
							<!-- 
								I heard that require js "reqiures" a special version of jquery! That sucks dude I am not going
								to use this bull crap loader thingy.

								Its true that there is a special build of requirejs that has a modified version of jquery added
								but you can just load jquery like any other javascript file. There is no need to wrap it into
								the module format used by requirejs. The special build of require with jquery allows you to be
								assured that jquery is loaded before any plugins are dynamically loaded. This will help you 
								avoid the use of the order plugin.
							-->
						</ul> 
          </section> 
				</div> 

				
				<div class="slide"> 
					<section>
				 		<header>	
           	 <h2> 
            		Lets get down to business: Modules
             </h2>
						 </header> 
<pre class="brush: js; toolbar: false">
define(['path/to/dependency',
			'jquery'], 
			function(dependency) {		
				return {yourObject: 'here'};
			}
});
</pre> 
            	<!-- 
								A module will define a well-scoped object that does not pollute the global namespace.
								The module will list its dependencies and get a handle to those dependencies without 
								the use of global objects. The dependencies will be be recieved by the module through 
								arguments to the function that defines the module.

								Modules that create global objects are discouraged and should be avoided. 	

								RequireJS modules are an extension to the module pattern without the need for global
								variables to refer to other modules. 	

								RequireJS will try to load modules as fast as possible. This means that order can not be 
								guaranteed

								RequireJS follows the CommonJS module format. So you could potentially reuse some of 
								your client code on the server using nodejs.

								There should be one module definition per file on disk. Multiple files can be bundles 
								for production using the optimization tool.

								Let explore some of the different module types and the uses of each.
							-->
					</section> 
				</div> 


				<div class="slide"> 
					<section>
				 		<header>	
           	 <h2> 
            		Simple Module Name/ Value Pairs
             </h2>
						 </header> 
<pre class="brush: js; toolbar: false">

define({
	some: 'thing',
	foo:  'Bar'
});
</pre> 
            	<!-- 
								If you have a very simple object that does not have any dependencies you
								can just pass the object literal to the call to define. 

								I personally use this for my application config files. I find it handy to
								define a configuration file for my app which holds things like web service
								URLS and other or log level information which can be handy to change on the 
								fly without rebuilding the entire application.
							-->
					</section> 
				</div> 


				<div class="slide"> 
					<section>
				 		<header>	
           	 <h2> 
            		Definition Functions Module
             </h2>
						 </header> 
<pre class="brush: js; toolbar: false">

define(function() {
	var results = 2+2,
	      me = {};

	me.result = results;
	me.name = 'james';

	return me;

});
</pre> 
            	<!-- 
								Let say you have a module that has no dependency but needs to do a little setup work. 
								You can pass a function to the define method and it will execute your setup function 
								when the module is required. 	
							-->
					</section> 
				</div> 




				<div class="slide"> 
          <section> 
						<header>
							<h2> 
								Defining Functions with Dependencies
							</h2> 
						</header>
<pre class="brush: js; toolbar: false">
define(['path/to/dependency',
	 		'path/to/another'], 	
			function(dependency, another){	
				var me = {};
				me.thinger = dependency.run();
				me.doer = another.getValue();
				return me;
			}
});
</pre> 
						<!--
							Finally we get to something which isnt so trival. If your module has dependecies, 
							the first argument should be an array of the dependency names and the second should
							be the definition function. Your definiiton function will be called once all of the 
							dependencies are loaded. The function should return an object that defines your module. 
							The dependencies will be passed into your function as arguments.

							In this example we see that this module has two dependencies. They are stored on disk like this	
						-->
          </section> 
				</div> 


				<div class="slide"> 
					<section>
				 		<header>	
           	 <h2> 
            		Modules Can Return Functions
             </h2>
						 </header> 
<pre class="brush: js; toolbar: false">

define(function() {
	var results = 2+2,
			me = {};

	me.result = result;

	return function(){
		console.log(me.result);
	};

});
</pre> 
            	<!-- 
								A module could also be used to return a function	
							-->
					</section> 
				</div> 

				<div class="slide"> 
          <section class="middle"> 
            <h2> 
              Okay, I get it. Modules are cool...
						</h2> 
						<h3>
							But how does require know where the modules are?!
						</h3>
            <img src="imgs/thoughtful.jpg" />
          </section> 
				</div>

				<div class="slide"> 
          <section> 
						<header>
            	<h2> 
              	This is how we configure our scripts.
							</h2>
						</header>	
<pre class="brush: js; toolbar: false">
require({
	baseUrl: '/path/to/modules',
	paths: {
		jquery:        '/3rdparty/jquery/jquery-1.5.js',
		underscore: '/3rdparty/underscorejs/underscore.js',
		backbone:   '3rdparty/backbone/backbone.js'
	}
});
</pre>				
						<!-- 
							This is an example of how we can configure requirejs. This example does not contain all of 
							the options avaiable but it does have some of the options which I find you will more commonly
							use. 

							BaseUrl: this defines the path to the directories which hold your modules. If you do not define 
							this option modules will be loaded relative to the html page that loaded require.

							Paths: I believe paths to be the most beneficial of all of the configuration options. This is
							where I normally give all of my thirdparty scripts a nice easy to remember name. Also in 
							development I can use the uncompressed versions of these scripts to aid in debugging and 
							development. Also if the version number of the script changes I can easily swap in the new
							version and test without having to touch all of my modules. 

							You can also define a timeout period for loading scripts the default timeout is 7 seconds. 

							You can also set a ready function which will be called once require is defined. 
						-->
          </section> 
				</div>
					
				<div class="slide"> 
					<section>
						<header> 
            <h2> 
							This allows us to use a friendly name for our scripts.							
						</h2> 
						</header>
<pre class="brush: js; toolbar: false">
define(['underscorejs',
			 'backbone',
			 'lightbox'], 
			 function() {	
					return {myThing:'thing'	};
		    }
});
</pre>

					</section> 
				</div> 

<div class="slide"> 
					<section>
						<header> 
            <h2> 
              Loading RequireJS and your application
						</h2> 
						</header>
<pre class="brush: html; toolbar: false">
&lt;script type="text/javascript" data-main="js/main" src="js/require.js"&gt;&lt;/script&gt;
</pre>	
<br><br>
<header> 
            <h2> 
              Then load your config.
						</h2> 
						</header>

<pre class="brush: html; toolbar: false">
&lt;script type="text/javascript" src="js/requireconf.js"&gt;&lt;/script&gt;
</pre>	
					</section> 
				</div> 



				<div class="slide"> 
          <section class="middle"> 
            <h2> 
              Using Modules like a Boss
            </h2> 
						<img src="imgs/boss.jpg" />
            <ul> 
							<li>Create application layers Loaded on demand.</li>
              <li>Optimize code downloaded by end users.</li>  
						</ul> 
						<!--
							Once you start to use modules you can start to think at a higher level and come up with 
							strategy to handle some common situations gracefully. 

							Once example is to create application layers which can be loaded on demand. For example
							There may be a set of modules that you know most of your application will depend on. So you 
							could create a module which will require these when the page loads. And then only loaded other
							modules on depand as the user starts to use your application. This will help you application load
							faster and keep the user from downloading code they may never use. 
						-->
          </section> 
				</div> 

				<div class="slide"> 
          <section class="middle"> 
            <h2> 
              Okay what if you *NEED* to load modules in order!?
						</h2>
						 <img src="imgs/cool.jpg" />
          </section>

					<!--
						Okay you get modules and you understand that modules are not loaded in any particular order. 
						But some of your thirdparty scripts require things be loaded in order. What do you do?
						Thats where plugins come in!
					-->	
				</div>

				<div class="slide"> 
          <section class="middle"> 
						<header>
            <h2> 
              OMG Plugins!!!!!
						</h2>
						</header>
<br> 
						<img src="imgs/omg-cat.jpg" />						
						<!--
							RequireJS does have a plugin api. But I am not going to cover the api in this talk. I am 
							going to discuss the plugins that come with the requirejs bundle and how you can use them 
							to solve some common problems you may encounter building your application. 
						-->
          </section> 
				</div>

				<div class="slide"> 
          <section> 
						<header>
            	<h2> 
              	Order Plugin
            	</h2>
						</header>	 
<pre class="brush: js; toolbar: false">

define(['path/to/module',
	'order!jquery',
	'order!jquery_tmpl'], 
	function(module) {
		//do some work
		return me;
});

</pre> 
					</section> 
						<!--
							Although you can get a version of requirejs with jquery built in personally I do not want 
							to use that version of requirejs. 

							I'd rather be able to pick and choose my version of jquery and not have to worry about 
							"authors name" building that version into require.

							So I use the order plugin quite a bit in my applications. 
						-->
				</div>

				<div class="slide"> 
          <section> 
						<header>
            <h2> 
              TextFile Dependency
						</h2>
						</header> 
<pre class="brush: html; toolbar: false">
&lt;div class=&quot;item&quot;&gt;	
	{{if isDeleted}}
	&lt;li id=&quot;${id}&quot; class=&quot;doneItem&quot; &gt;
	{{else}}
	&lt;li id=&quot;${id}&quot; class=&quot;todoItem&quot;&gt;
	{{/if}}
&lt;/div&gt;
</pre>	
					</section> 
					<!--
						This is another of my favorite plugins. This one allows you to load a text file as a dependency. 
						This comes in really handy for templates! I can define my templates in an HTML file and then 
						just make my module list it as a dependency and I will get the string passed into my module 
						definiition. 

						The string from the text file can be inlined during optimization if you are worried about additional 
						requests back to the server for your templates. 

					-->
				</div>

				<div class="slide"> 
          <section> 
						<header>
            <h2> 
							TextFile Example 
						</h2>
						</header> 
<pre class="brush: js; toolbar: false">
define(['text!path/tmpl.html',
				 'order!jquery',
				 'order!jquery_tmpl'], 
				 function(template) {
	$(template).template('myTmpl');
	$.tmpl('myTmpl', data).appendTo('body');
});
</pre>	
					</section> 
				</div>
	
				<div class="slide"> 
          <section class="middle"> 
						<header>
            <h2> 
              Build System
						</h2> 
						</header>
<br>
          	 <img src="imgs/build.png" />
					</section>
					<!--
						Now lets talk about the build system. Although modules and all these module definition files 
						are great for development. They would be a nightmare in production, where you want as few 
						requests as possible when loading your application. So this is where the build system comes
						into play. 

						Once you have your application build and tested you can then go on to define a build configuration and 
						run the build script to minify your code and combine your scripts. 

						Will also remove comments from your css and inline any styles sheets referenced using @import

						The build system currently uses Rhino but there has been a lot of development around getting the build 
						system to use nodejs. If you work off of the master branch on github you can start to experiment if the
						build system that uses node. 

						Also the build system currently uses closure compiler to minify and conpress the javascript files. But 
						again there is work on the master branch which uses UglifyJS. 

						The nodejs builds are extremely fast according to the author James Burke, a java build which takes 5-6 
						seconds will take less than 1 second in node. James Burke is quoted as saying "Node is so fast it makes
						me cry tears of joy!"
						-->
					</div>

				<div class="slide"> 
					<section>
				 		<header>	
            <h2> 
              Build Configuration
						</h2> 
					</header>
<pre class="brush: js; toolbar: false">
({
    appDir: "../",
    baseUrl: "js",
    dir: "../../build",
    modules: [
        {
            name: "mainModule"
        }
    ]
})
</pre> 

					</section>
					<!--
						This is an example build file. It configures the build tool with the location of the code to optimize. 

						AppDir is the location of you application relative to the build scripts. 

						baseUrl is the base url of your modules. Should be relative to appdir

						dir: is where the build tool will stage the output from the build process. Pleas make sure this isnt
						the same directory as your application!

						modules is where you specify which modules the build too should optimize. The build tool will search and
						optimize all of the dependecies in your module. 

						The build script will also optimize any CSS it finds in your app directory

						Once the build is complete you can check the output directory for your optimized code. 

						There are many more configuration options. But Ijust wanted to touch on the most important here. 
				
					-->
        </div>


				<div class="slide"> 
          <section class="middle"> 
            <h2> 
              Advanced
            </h2> 
            <ul> 
							<li>NodeJS Support</li>
              <li>Rhino Support</li> 
              <li>WebWorkers</li> 
							<li>Multiversion Support</li>

            </ul> 
          </section> 
        </div>
 
        
 
      </div> <!-- slides --> 
 
    </div> <!-- presentation --> 
 
    <script> 
      (function() {
        var doc = document;
        var disableBuilds = true;
 
        var ctr = 0;
        var spaces = /\s+/, a1 = [''];
 
        var toArray = function(list) {
          return Array.prototype.slice.call(list || [], 0);
        };
 
        var byId = function(id) {
          if (typeof id == 'string') { return doc.getElementById(id); }
          return id;
        };
 
        var query = function(query, root) {
          if (!query) { return []; }
          if (typeof query != 'string') { return toArray(query); }
          if (typeof root == 'string') {
            root = byId(root);
            if(!root){ return []; }
          }
 
          root = root || document;
          var rootIsDoc = (root.nodeType == 9);
          var doc = rootIsDoc ? root : (root.ownerDocument || document);
 
          // rewrite the query to be ID rooted
          if (!rootIsDoc || ('>~+'.indexOf(query.charAt(0)) >= 0)) {
            root.id = root.id || ('qUnique' + (ctr++));
            query = '#' + root.id + ' ' + query;
          }
          // don't choke on something like ".yada.yada >"
          if ('>~+'.indexOf(query.slice(-1)) >= 0) { query += ' *'; }
 
          return toArray(doc.querySelectorAll(query));
        };
 
        var strToArray = function(s) {
          if (typeof s == 'string' || s instanceof String) {
            if (s.indexOf(' ') < 0) {
              a1[0] = s;
              return a1;
            } else {
              return s.split(spaces);
            }
          }
          return s;
        };
 
        var addClass = function(node, classStr) {
          classStr = strToArray(classStr);
          var cls = ' ' + node.className + ' ';
          for (var i = 0, len = classStr.length, c; i < len; ++i) {
            c = classStr[i];
            if (c && cls.indexOf(' ' + c + ' ') < 0) {
              cls += c + ' ';
            }
          }
          node.className = cls.trim();
        };
 
        var removeClass = function(node, classStr) {
          var cls;
          if (classStr !== undefined) {
            classStr = strToArray(classStr);
            cls = ' ' + node.className + ' ';
            for (var i = 0, len = classStr.length; i < len; ++i) {
              cls = cls.replace(' ' + classStr[i] + ' ', ' ');
            }
            cls = cls.trim();
          } else {
            cls = '';
          }
          if (node.className != cls) {
            node.className = cls;
          }
        };
 
        var toggleClass = function(node, classStr) {
          var cls = ' ' + node.className + ' ';
          if (cls.indexOf(' ' + classStr.trim() + ' ') >= 0) {
            removeClass(node, classStr);
          } else {
            addClass(node, classStr);
          }
        };
 
        var ua = navigator.userAgent;
        var isFF = parseFloat(ua.split('Firefox/')[1]) || undefined;
        var isWK = parseFloat(ua.split('WebKit/')[1]) || undefined;
        var isOpera = parseFloat(ua.split('Opera/')[1]) || undefined;
 
        var canTransition = (function() {
          var ver = parseFloat(ua.split('Version/')[1]) || undefined;
          // test to determine if this browser can handle CSS transitions.
          var cachedCanTransition = 
            (isWK || (isFF && isFF > 3.6 ) || (isOpera && ver >= 10.5));
          return function() { return cachedCanTransition; }
        })();
 
        //
        // Slide class
        //
        var Slide = function(node, idx) {
          this._node = node;
          if (idx >= 0) {
            this._count = idx + 1;
          }
          if (this._node) {
            addClass(this._node, 'slide distant-slide');
          }
          this._makeCounter();
          this._makeBuildList();
        };
 
        Slide.prototype = {
          _node: null,
          _count: 0,
          _buildList: [],
          _visited: false,
          _currentState: '',
          _states: [ 'distant-slide', 'far-past',
                     'past', 'current', 'future',
                     'far-future', 'distant-slide' ],
          setState: function(state) {
            if (typeof state != 'string') {
              state = this._states[state];
            }
            if (state == 'current' && !this._visited) {
              this._visited = true;
              this._makeBuildList();
            }
            removeClass(this._node, this._states);
            addClass(this._node, state);
            this._currentState = state;
 
            // delay first auto run. Really wish this were in CSS.
            /*
            this._runAutos();
            */
            var _t = this;
            setTimeout(function(){ _t._runAutos(); } , 400);
          },
          _makeCounter: function() {
            if(!this._count || !this._node) { return; }
            var c = doc.createElement('span');
            c.innerHTML = this._count;
            c.className = 'counter';
            this._node.appendChild(c);
          },
          _makeBuildList: function() {
            this._buildList = [];
            if (disableBuilds) { return; }
            if (this._node) {
              this._buildList = query('[data-build] > *', this._node);
            }
            this._buildList.forEach(function(el) {
              addClass(el, 'to-build');
            });
          },
          _runAutos: function() {
            if (this._currentState != 'current') {
              return;
            }
            // find the next auto, slice it out of the list, and run it
            var idx = -1;
            this._buildList.some(function(n, i) {
              if (n.hasAttribute('data-auto')) {
                idx = i;
                return true;
              }
              return false;
            });
            if (idx >= 0) {
              var elem = this._buildList.splice(idx, 1)[0];
              var transitionEnd = isWK ? 'webkitTransitionEnd' : (isFF ? 'mozTransitionEnd' : 'oTransitionEnd');
              var _t = this;
              if (canTransition()) {
                var l = function(evt) {
                  elem.parentNode.removeEventListener(transitionEnd, l, false);
                  _t._runAutos();
                };
                elem.parentNode.addEventListener(transitionEnd, l, false);
                removeClass(elem, 'to-build');
              } else {
                setTimeout(function() {
                  removeClass(elem, 'to-build');
                  _t._runAutos();
                }, 400);
              }
            }
          },
          buildNext: function() {
            if (!this._buildList.length) {
              return false;
            }
            removeClass(this._buildList.shift(), 'to-build');
            return true;
          },
        };
 
        //
        // SlideShow class
        //
        var SlideShow = function(slides) {
          this._slides = (slides || []).map(function(el, idx) {
            return new Slide(el, idx);
          });
 
          var h = window.location.hash;
          try {
            this.current = parseInt(h.split('#slide')[1], 10);
          }catch (e) { /* squeltch */ }
          this.current = isNaN(this.current) ? 1 : this.current;
          var _t = this;
          doc.addEventListener('keydown', 
              function(e) { _t.handleKeys(e); }, false);
          doc.addEventListener('mousewheel', 
              function(e) { _t.handleWheel(e); }, false);
          doc.addEventListener('DOMMouseScroll', 
              function(e) { _t.handleWheel(e); }, false);
          doc.addEventListener('touchstart', 
              function(e) { _t.handleTouchStart(e); }, false);
          doc.addEventListener('touchend', 
              function(e) { _t.handleTouchEnd(e); }, false);
          window.addEventListener('popstate', 
              function(e) { _t.go(e.state); }, false);
          this._update();          
        };
 
        SlideShow.prototype = {
          _slides: [],
          _update: function(dontPush) {
            
            // catch to set things right on the initial load. popstate fires on pageload.
            if (this.current === null) return;
            
            document.querySelector('#presentation-counter').innerText = this.current;
            if (history.pushState) {
              if (!dontPush) {
                history.pushState(this.current, 'Slide ' + this.current, '#slide' + this.current);
              }
            } else {
              window.location.hash = 'slide' + this.current;
            }
            for (var x = this.current-1; x < this.current + 7; x++) {
              if (this._slides[x-4]) {
                this._slides[x-4].setState(Math.max(0, x-this.current));
              }
            }
          },
 
          current: 0,
          next: function() {
            if (!this._slides[this.current-1].buildNext()) {
              this.current = Math.min(this.current + 1, this._slides.length);
              this._update();
            }
          },
          prev: function() {
            this.current = Math.max(this.current-1, 1);
            this._update();
          },
          go: function(num) {
            if (history.pushState && this.current != num) {
              history.replaceState(this.current, 'Slide ' + this.current, '#slide' + this.current);
            }
            this.current = num;
            this._update(true);
          },
 
          _notesOn: false,
          showNotes: function() {
            var isOn = this._notesOn = !this._notesOn;
            query('.notes').forEach(function(el) {
              el.style.display = (notesOn) ? 'block' : 'none';
            });
          },
          switch3D: function() {
            toggleClass(document.body, 'three-d');
          },
          handleWheel: function(e) {
            var delta = 0;
            if (e.wheelDelta) {
              delta = e.wheelDelta/120;
              if (isOpera) {
                delta = -delta;
              }
            } else if (e.detail) {
              delta = -e.detail/3;
            }
 
            if (delta > 0 ) {
              this.prev();
              return;
            }
            if (delta < 0 ) {
              this.next();
              return;
            }
          },
          handleKeys: function(e) {
            if (/^(input|textarea)$/i.test(e.target.nodeName) ||
                e.target.isContentEditable) {
              return;
            }
            switch (e.keyCode) {
              case 37: // left arrow
                this.prev(); break;
              case 39: // right arrow
              case 32: // space
                this.next(); break;
              case 50: // 2
                this.showNotes(); break;
              case 51: // 3
                this.switch3D(); break;
            }
          },
          _touchStartX: 0,
          handleTouchStart: function(e) {
            this._touchStartX = e.touches[0].pageX;
          },
          handleTouchEnd: function(e) {
            var delta = this._touchStartX - e.changedTouches[0].pageX;
            var SWIPE_SIZE = 150;
            if (delta > SWIPE_SIZE) {
              this.next();
            } else if (delta< -SWIPE_SIZE) {
              this.prev();
            }
          },
        };
 
        // Initialize
        var slideshow = new SlideShow(query('.slide')), notesWindow;

        //document.querySelector('#toggle-counter').addEventListener('click', toggleCounter, false);
        //document.querySelector('#toggle-size').addEventListener('click', toggleSize, false);
        //document.querySelector('#toggle-transitions').addEventListener('click', toggleTransitions, false);
        //document.querySelector('#toggle-gradients').addEventListener('click', toggleGradients, false);
 
        var counters = document.querySelectorAll('.counter');
        var slides = document.querySelectorAll('.slide');
 
        function toggleCounter() {
          toArray(counters).forEach(function(el) {
            el.style.display = (el.offsetHeight) ? 'none' : 'block';
          });
        }
        
        function toggleSize() {
          toArray(slides).forEach(function(el) {
            if (!/reduced/.test(el.className)) {
              addClass(el, 'reduced');
            }
            else {
              removeClass(el, 'reduced');
            }
          });
        }
 
        function toggleTransitions() {
          toArray(slides).forEach(function(el) {
            if (!/no-transitions/.test(el.className)) {
              addClass(el, 'no-transitions');
            }
            else {
              removeClass(el, 'no-transitions');
            }
          });
        }
        
        function toggleGradients() {
          toArray(slides).forEach(function(el) {
            if (!/no-gradients/.test(el.className)) {
              addClass(el, 'no-gradients');
            }
            else {
              removeClass(el, 'no-gradients');
            }
          });
        }

				//JRM open notes window
				toggleSize();
				toggleCounter();
				SyntaxHighlighter.all();
				window.addEventListener('message', function(evt) {
					if(evt.data.slideNum){
						var goto = evt.data.slideNum;
						if(goto !== slideshow.current) {
							slideshow.go(goto);	
							}
					}
				
				});
			
      })();
    </script> 
 
    <!--[if lt IE 9]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">
    </script>
    <script>CFInstall.check({ mode: "overlay" });</script>
    <![endif]--> 
    
  </body> 
</html>
